<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <title>New This</title>
    <link rel="stylesheet" href="../base.css" />
  </head>
  <body>
    <button class="one">One</button>
    <button class="two">Two</button>
    <button class="go">GO</button>
    <button class="cancel">Cancel</button>
    <script>
      let num = new Number(5);
      console.log(num);

      let num1 = 15;
      console.log(num1.toString(16));

      const myDate = new Date('August 11, 2025');
      console.log(myDate.toLocaleDateString('ru-Latn', { weekday: 'long' }));

      const names = ['igor', 'oleg'];
      const igor = { name: 'igor' };

      const names2 = new Array('igor', 'oleg');
      const igor2 = new Object({ name: 'igor' });

      const span = document.createElement('span');

      function Pizza(toppings = [], customer) {
        // {}
        // {}.constructor = Pizza;
        console.log('Making Pizza');

        this.toppings = toppings;
        this.customer = customer;

        this.id = Math.floor(Math.random() * 16777215).toString(16);
        this.slices = 10;
        this.size = 'medium';

        // this.eat = function() {
        //   if (this.slices > 0) {
        //     this.slices = this.slices - 1;
        //     console.log(`Ням. Теперь у вас осталось ${this.slices}`);
        //     return this.slices;
        //   } else {
        //     console.log(`простите, больше не осталось кусочков`);
        //   }
        // };
      }

      Pizza.prototype.eat = function() {
        if (this.slices > 0) {
          this.slices = this.slices - 1;
          console.log(`Ням. Теперь у вас осталось ${this.slices}`);
          return this.slices;
        } else {
          console.log(`простите, больше не осталось кусочков`);
        }
      };

      Pizza.prototype.describe = function() {
        return `This pizza is for ${
          this.customer
        } with toppings ${this.toppings.join(', ')} and ${
          this.slices
        } slices left`;
      };

      Pizza.prototype.size = 'Large';

      const pepperoniPizza = new Pizza(['pepperoni'], 'Igor');
      const canadianPizza = new Pizza(
        ['pepperoni', 'mushrooms', 'onion'],
        'Oleg',
      );

      console.log(pepperoniPizza);
      console.log(canadianPizza);

      const button1 = document.querySelector('.one');
      const button2 = document.querySelector('.two');
      const go = document.querySelector('.go');
      const cancel = document.querySelector('.cancel');

      // function tellMeAboutTheButton() {
      //   console.log('outsude ', this);

      //   setTimeout(function() {
      //     console.log('inside ', this);
      //     this.textContent = 'You clicked me';
      //   }, 1000);
      // }

      // // Вариант с замыканием
      // function tellMeAboutTheButton() {
      //   console.log('outsude ', this);

      //   let self = this;
      //   setTimeout(function() {
      //     console.log('inside ', this);
      //     self.textContent = 'You clicked me';
      //   }, 1000);
      // }

      // // Вариант со стрелочной функцией

      // function tellMeAboutTheButton() {
      //   console.log('outsude ', this);
      //   setTimeout(() => {
      //     console.log('inside ', this);
      //     this.textContent = 'You clicked me';
      //   }, 1000);
      // }

      // Bind Call Apply методы функций

      function tellMeAboutTheButton() {
        console.log('outsude ', this);
        setTimeout(
          function() {
            console.log('inside ', this);
            this.textContent = 'You clicked me';
          }.bind(this),
          1000,
        );
      }

      let buttons = document.querySelectorAll('button');

      let foundBtn = Array.prototype.find.call(buttons, item => {
        return item.textContent === 'Two';
      });
      let foundBtn2 = [].find.call(buttons, item => {
        return item.textContent === 'One';
      });

      // fn.call(this, qwe, qwe, qwe, er, df);
      // fn.apply(this, [qwe, qwe, qwe, er, df]);

      // let newFn = fn.bind(this);

      // newFn(sdf, sdf, sdf, df);

      button1.addEventListener('click', tellMeAboutTheButton);
      button2.addEventListener('click', tellMeAboutTheButton);
      go.addEventListener('click', runWithTimeout);
      cancel.addEventListener('click', cancelTimeout);

      let timeout;
      function runWithTimeout() {
        timeout = setTimeout(function() {
          console.log('Hi');
        }, 1000);
      }

      function cancelTimeout() {
        clearTimeout(timeout);
      }

      // const timeout = setInterval(function() {
      //   console.log('Hello');
      // }, 1000);
    </script>
  </body>
</html>
